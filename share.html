<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê³µìœ í•˜ê¸° - ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ í•´ë³´ì„¸ìš”!" />
    <meta name="keywords" content="ì„±ê²½ì¸ë¬¼ MBTI ê³µìœ , ì¹´ì¹´ì˜¤í†¡ ê³µìœ , í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê³µìœ " />
    <meta name="author" content="ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ê³µìœ í•˜ê¸° - ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸" />
    <meta property="og:description" content="ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ í•´ë³´ì„¸ìš”!" />
    <meta property="og:url" content="https://b-mbti.money-hotissue.com/share" />
    <meta property="og:site_name" content="ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸" />
    <meta property="og:image" content="https://b-mbti.money-hotissue.com/og-image-new.png" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://b-mbti.money-hotissue.com/favicon.ico" />
    
    <!-- ì¹´ì¹´ì˜¤ JavaScript SDK -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
            integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script>
    
    <style>
      * { 
        margin: 0; 
        padding: 0; 
        box-sizing: border-box; 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      }
      body { 
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
        color: #333; 
        padding: 20px; 
        min-height: 100vh; 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        justify-content: center; 
      }
      .container { 
        background: white; 
        border-radius: 20px; 
        padding: 32px; 
        box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
        max-width: 450px; 
        width: 100%; 
        text-align: center;
      }
      h1 { 
        margin-bottom: 8px; 
        color: #333; 
        font-size: 28px; 
        font-weight: 700;
      }
      .subtitle {
        color: #666;
        font-size: 14px;
        margin-bottom: 32px;
      }
      .share-button { 
        display: block; 
        width: 100%; 
        padding: 18px 24px; 
        margin: 16px 0; 
        border: none; 
        border-radius: 16px; 
        font-size: 16px; 
        font-weight: 600; 
        cursor: pointer; 
        transition: all 0.3s ease; 
        text-decoration: none; 
        text-align: center; 
        position: relative;
        overflow: hidden;
      }
      .share-button:before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
      }
      .share-button:hover:before {
        left: 100%;
      }
      .kakao { 
        background: linear-gradient(135deg, #fee500, #fccc02); 
        color: #3c1e1e; 
        box-shadow: 0 4px 15px rgba(254, 229, 0, 0.3);
      }
      .kakao:hover { 
        transform: translateY(-3px); 
        box-shadow: 0 8px 25px rgba(254, 229, 0, 0.4); 
      }
      .copy { 
        background: linear-gradient(135deg, #667eea, #764ba2); 
        color: white; 
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }
      .copy:hover { 
        transform: translateY(-3px); 
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); 
      }
      .back-button { 
        background: linear-gradient(135deg, #f093fb, #f5576c); 
        color: white; 
        padding: 14px 24px; 
        border: none; 
        border-radius: 12px; 
        margin-top: 24px; 
        cursor: pointer; 
        font-size: 14px; 
        width: 100%; 
        transition: all 0.3s ease;
      }
      .back-button:hover { 
        transform: translateY(-2px); 
        box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
      }
      @media (max-width: 480px) {
        body { padding: 16px; }
        .container { padding: 24px; border-radius: 16px; }
        h1 { font-size: 24px; }
        .share-button { padding: 16px 20px; font-size: 15px; }
      }
      .success-message {
        background: #d4edda;
        color: #155724;
        padding: 12px;
        border-radius: 8px;
        margin: 16px 0;
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ“¤ ê³µìœ í•˜ê¸°</h1>
      <p class="subtitle">í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•´ë³´ì„¸ìš”!</p>
      
      <div class="success-message" id="successMessage">
        âœ… ì„±ê³µì ìœ¼ë¡œ ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤!
      </div>
      
      <button class="share-button kakao" onclick="shareToKakao()">
        ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ 
      </button>
      
      <button class="share-button copy" onclick="copyLink()">
        ğŸ”— ë§í¬ ë³µì‚¬
      </button>
      
      <button class="back-button" onclick="goBack()">
        ğŸ  ê²°ê³¼ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
      </button>
    </div>
    
    <script>
      // URLì—ì„œ ê³µìœ  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      const urlParams = new URLSearchParams(window.location.search);
      const resultType = urlParams.get('type') || 'ENFP';
      const character = urlParams.get('character') || 'ì•„ë¸Œë¼í•¨';
      
      // ê¸°ë³¸ ê³µìœ  í…ìŠ¤íŠ¸
      const shareText = `ğŸ™ ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼ ğŸ™

ì €ëŠ” '${character}(${resultType})' ìœ í˜•ì´ì—ìš”!

ì—¬ëŸ¬ë¶„ë„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!`;
      
      const shareUrl = 'https://b-mbti.money-hotissue.com';
      
      // ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” (ìƒˆë¡œìš´ ì•± í‚¤ ì‚¬ìš©)
      const KAKAO_JS_KEY = '8e24012c3a70657f43f76742dcce245c'; // JavaScript í‚¤ ì‚¬ìš©
      
      if (window.Kakao) {
        if (!Kakao.isInitialized()) {
          try {
            Kakao.init(KAKAO_JS_KEY);
            console.log('ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” ì„±ê³µ');
          } catch (error) {
            console.error('ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
          }
        }
      } else {
        console.error('ì¹´ì¹´ì˜¤ SDK ë¡œë“œ ì‹¤íŒ¨');
      }
      
      function showSuccess() {
        const message = document.getElementById('successMessage');
        message.style.display = 'block';
        setTimeout(() => {
          message.style.display = 'none';
        }, 3000);
      }
      
      function shareToKakao() {
        // ì¹´ì¹´ì˜¤ SDKê°€ ì •ìƒ ì´ˆê¸°í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
        if (window.Kakao && Kakao.isInitialized() && Kakao.Link) {
          try {
            Kakao.Link.sendDefault({
              objectType: 'feed',
              content: {
                title: 'ì„±ê²½ì¸ë¬¼ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼',
                description: shareText,
                imageUrl: 'https://b-mbti.money-hotissue.com/og-image-new.png',
                link: {
                  mobileWebUrl: shareUrl,
                  webUrl: shareUrl,
                },
              },
              buttons: [
                {
                  title: 'í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°',
                  link: {
                    mobileWebUrl: shareUrl,
                    webUrl: shareUrl,
                  },
                },
              ],
              success: function(response) {
                console.log('ì¹´ì¹´ì˜¤ ê³µìœ  ì„±ê³µ:', response);
                showSuccess();
              },
              fail: function(error) {
                console.log('ì¹´ì¹´ì˜¤ ê³µìœ  ì‹¤íŒ¨:', error);
                fallbackKakaoShare();
              }
            });
          } catch (error) {
            console.error('ì¹´ì¹´ì˜¤ ë§í¬ ì „ì†¡ ì˜¤ë¥˜:', error);
            fallbackKakaoShare();
          }
        } else {
          console.log('ì¹´ì¹´ì˜¤ SDK ë¯¸ì´ˆê¸°í™” - ëŒ€ì•ˆ ë°©ë²• ì‚¬ìš©');
          fallbackKakaoShare();
        }
      }
      
      function fallbackKakaoShare() {
        // SDKë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ë•Œì˜ ëŒ€ì•ˆ
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
          // ëª¨ë°”ì¼ì—ì„œëŠ” ì¹´ì¹´ì˜¤í†¡ ì•± ìŠ¤í‚´ ì‚¬ìš©
          const kakaoTalkUrl = `kakaotalk://msg?text=${encodeURIComponent(shareText + '\\n\\n' + shareUrl)}`;
          window.location.href = kakaoTalkUrl;
          
          setTimeout(() => {
            if (confirm('ì¹´ì¹´ì˜¤í†¡ ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šê±°ë‚˜ ì—´ë¦¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì¹´ì¹´ì˜¤í†¡ ì›¹ ë²„ì „ìœ¼ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
              window.open('https://web.kakao.com/', '_blank');
            }
          }, 1000);
        } else {
          // PCì—ì„œëŠ” ì›¹ ë²„ì „ìœ¼ë¡œ ì´ë™
          if (confirm('ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì›¹ ë²„ì „ ì¹´ì¹´ì˜¤í†¡ì´ ì—´ë¦½ë‹ˆë‹¤.')) {
            window.open('https://web.kakao.com/', '_blank');
            navigator.clipboard.writeText(shareText + '\\n\\n' + shareUrl).then(() => {
              alert('ğŸ“‹ í…ìŠ¤íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì¹´ì¹´ì˜¤í†¡ì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.');
            }).catch(() => {});
          }
        }
      }
      

      
      function copyLink() {
        const fullText = shareText + '\\n\\n' + shareUrl;
        navigator.clipboard.writeText(fullText).then(() => {
          alert('ğŸ“‹ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
          showSuccess();
        }).catch(() => {
          // ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²•
          const textArea = document.createElement('textarea');
          textArea.value = fullText;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
          alert('ğŸ“‹ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
          showSuccess();
        });
      }
      
      function goBack() {
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ê²°ê³¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const resultType = urlParams.get('type');
        const character = urlParams.get('character');
        
        if (window.opener && !window.opener.closed) {
          // ë¶€ëª¨ ì°½ì´ ìˆìœ¼ë©´ ë‹«ê³  ë¶€ëª¨ ì°½ì— í¬ì»¤ìŠ¤
          window.close();
          window.opener.focus();
        } else {
          // ë¶€ëª¨ ì°½ì´ ì—†ìœ¼ë©´ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™ (ê²°ê³¼ ìœ ì§€)
          if (resultType && character) {
            // ê²°ê³¼ ì •ë³´ë¥¼ localStorageì— ì €ì¥í•´ì„œ ê²°ê³¼ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡
            localStorage.setItem('tempResult', JSON.stringify({
              type: resultType,
              character: character,
              timestamp: Date.now()
            }));
            window.location.href = `https://b-mbti.money-hotissue.com/result.html?type=${resultType}&character=${encodeURIComponent(character)}`;
          } else {
            // ê²°ê³¼ ì •ë³´ê°€ ì—†ìœ¼ë©´ ë©”ì¸ í˜ì´ì§€ë¡œ
            window.location.href = 'https://b-mbti.money-hotissue.com';
          }
        }
      }
    </script>
  </body>
</html>